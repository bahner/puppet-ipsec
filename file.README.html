<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.9
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-ipsec">ipsec</h1>

<h4 id="label-Table+of+Contents">Table of Contents</h4>
<ol><li>
<p><a href="#description">Description</a></p>
</li><li>
<p><a href="#setup">Setup - The basics of getting started with ipsec</a></p>
<ul><li>
<p><a href="#what-ipsec-affects">What ipsec affects</a></p>
</li><li>
<p><a href="#setup-requirements">Setup requirements</a></p>
</li><li>
<p><a href="#beginning-with-ipsec">Beginning with ipsec</a></p>
</li></ul>
</li><li>
<p><a href="#usage">Usage - Configuration options and additional
functionality</a></p>
</li><li>
<p><a href="#reference">Reference - An under-the-hood peek at what the module
is doing and how</a></p>
</li><li>
<p><a href="#limitations">Limitations - OS compatibility, etc.</a></p>
</li><li>
<p><a href="#development">Development - Guide for contributing to the
module</a></p>
</li></ol>

<h2 id="label-Description">Description</h2>

<p>This puppet module is providing facility to install and configure ipsec
settings. Currently using strongswan, it manages package installation, the
contents of configuration files ipsec.secrets and ipsec.conf and
controlling the service itself in order to reload configurations after
changes. The module is designed to be fully configurable through parameter
lookup, but it also allowes you to manage configuration artefacts via
resource instances.</p>

<h2 id="label-Setup">Setup</h2>

<h3 id="label-Beginning+with+ipsec">Beginning with ipsec</h3>

<p>The very basic steps needed for a user to get the module up and running.
This can include setup steps, if necessary, or it can be an example of the
most basic use of the module.</p>

<h2 id="label-Usage">Usage</h2>

<p>To get startet with this module, simply include the module into your puppet
manifest. Passing parameter values may happen by direct assignment or
preferably via lookup.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_ipsec'>ipsec</span>
</code></pre>

<p>The module will install strongswan on the affected nodes and care about the
service to be enabled.</p>

<h2 id="label-Reference">Reference</h2>
<ul><li>
<p>Reference documentation is created by Puppet Strings code comments, and
published as gh_pages at [<a
href="https://rtib.github.io/puppet-ipsec">rtib.github.io/puppet-ipsec</a>/].</p>
</li></ul>

<h3 id="label-Data+types">Data types</h3>

<p>The module introduces some custom data types, which are not contained in
the above reference.</p>

<h4 id="label-Ipsec-3A-3ATime">Ipsec::Time</h4>

<p>Represents a time value as used in Strongswan configuration. Consisting of
one or more numerals and an optional suffix, which designate the dimensions
of seconds (s), minutes (m), hours (h) or days (d). <code>puppet type
Ipsec::Time = Pattern[/^[0-9]+[smhd]?$/] </code></p>

<h4 id="label-Ipsec-3A-3ASecret">Ipsec::Secret</h4>

<p>The custom data structure to handle different types of secrets
configuration for Strongswan is a bit more complex. It consists of an
optional selector and a secret, which is a varian of some sub-types. The
outer structure is defined as <code>puppet type Ipsec::Secret = Struct[{  
selector =&gt; Optional[Pattern[/[^:]*/]],   secret   =&gt; Variant[    
Ipsec::Secret::Privkey,     Ipsec::Secret::Shared,    
Ipsec::Secret::Smartcard,   ], }] </code></p>

<p>Each sub-type does have a mandatory field named type, which may decide on
the applicability of the particular type.</p>

<h4 id="label-Ipsec-3A-3ASecret-3A-3AShared">Ipsec::Secret::Shared</h4>

<p>The custom type for shared secrets is handling types <code>PSK</code>,
<code>EAP</code> and <code>XAUTH</code> and storing the passphrase as
string. <code>puppet type Ipsec::Secret::Shared = Struct[{   type      
=&gt; Enum['PSK','EAP','XAUTH'],   passphrase =&gt; String, }] </code></p>

<p>Note! The passphrase is not treated as sensitive data. Use this feature of
the module with care, only in the case no other solution is possible. The
secrets_include parameter is providing feature to ipsec.secrets which may
support other solutions for handling secret passphrase.</p>

<h4 id="label-Ipsec-3A-3ASecret-3A-3APrivkey">Ipsec::Secret::Privkey</h4>

<p>Private key type secrets has one of types <code>RSA</code>,
<code>ECDSA</code> or <code>P12</code>. All Privkey secrets does need a
private_key_file pointing to the file path the secret key is found. It the
private key needs to be unlocked, a passphrase may be filed or the prompt
option enabled. <code>puppet type Ipsec::Secret::Privkey = Struct[{   type 
=&gt; Enum['RSA','ECDSA','P12'],   private_key_file =&gt;
Stdlib::Absolutepath,   prompt           =&gt; Optional[Boolean],  
passphrase       =&gt; Optional[String], }] </code></p>

<p>Note! The passphrase is not treated as sensitive data. Use this feature
with care, only in the case no other solution is possible. The
secrets_include parameter is providing feature to ipsec.secrets which may
support other solutions for handling secret passphrase.</p>

<h4 id="label-Ipsec-3A-3ASecret-3A-3ASmartcard">Ipsec::Secret::Smartcard</h4>

<p>Smartcard based authentication is supported by a secret with type
<code>PIN</code>, which mandatory takes a keyid parameter, and optional the
slotnr, module name. If the card needs to be unlocked, a pin may be filed
or the prompt option enabled. <code>puppet type Ipsec::Secret::Smartcard =
Struct[{   type   =&gt; Enum['PIN'],   slotnr =&gt; Optional[Integer],  
module =&gt; Optional[String],   keyid  =&gt; Integer,   pin    =&gt;
Optional[Integer],   prompt =&gt; Optional[Boolean], }] </code></p>

<p>Note! The pin is not treated as sensitive data. Use this feature with care,
only in the case no other solution is possible. The secrets_include
parameter is providing feature to ipsec.secrets which may support other
solutions for handling secret pin.</p>

<h2 id="label-Limitations">Limitations</h2>

<p>The module is currently tested for a few OS distributions only and needs
contribution to be ported and tested on others. There are features
Strongswan is providing but cannot be configured with this module, e.g.
NTLM based authentication. Feel free to contribute missing features.</p>

<h2 id="label-Development">Development</h2>

<p>Since your module is awesome, other users will want to play with it. Let
them know what the ground rules for contributing are.</p>

<h2 id="label-Release+Notes-2FContributors-2FEtc.+Optional">Release Notes/Contributors/Etc. <strong>Optional</strong></h2>

<p>If you aren&#39;t using changelog, put your release notes here (though you
should consider using changelog). You can also add any additional sections
you feel are necessary or important to include here. Please use the
<code>##</code> header.</p>
</div></div>

      <div id="footer">
  Generated on Wed Nov 15 16:16:18 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.9 (ruby-2.4.2).
</div>

    </div>
  </body>
</html>