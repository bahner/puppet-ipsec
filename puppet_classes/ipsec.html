<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Puppet Class: ipsec
  
    &mdash; Documentation by YARD 0.9.20
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_classes::ipsec";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (i)</a> &raquo;
    <span class='title'><span class='object_link'>Puppet Classes</span></span>
     &raquo; 
    <span class="title">ipsec</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Puppet Class: ipsec</h1>
<div class="box_info">
  
  
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/init.pp
    </dd>
  </dl>
</div>

  <h2>Summary</h2>
  Main entry point to this module.

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>Puppet module for IPsec</p>

<p>This puppet module is providing facility to install and configure ipsec
settings. Currently using strongswan, it manages package installation, the
contents of configuration files ipsec.secrets and ipsec.conf and
controlling the service itself in order to reload configurations after
changes. The module is designed to be fully configurable through parameter
lookup.</p>

<p>Secrets are added to the ipsec.secrets file through the secrets parameter
of the module. Consisting of an array of custom typed entries, all entries
are added as individual secret etries. Parameter secrets_includes provides
the possibility to include auxiliary secret files.</p>

<p>The contents of ipsec.conf, as it consists of three different types of
entries, is generated upon the fixed structure parameter named conf. As the
setup section is singleton within ipsec.conf, the <a
href="'setup'">conf</a> hash only includes the actual setup key-value
pairs. Entries <code>conf['authorities']</code> and
<code>conf['connections']</code> are processed in a factory pattern,
creating the according resource instances, which build the actual sections
of the ipsec.conf file. The possibility of configuration fragments placed
in /etc/ipsec.d/ is not utilised.</p>

  </div>
</div>


<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>specification of secrets</p>
</div></p>
      
      <pre class="example code"><code>ipsec::secrets:
  - selector: &#39;@example.org&#39;
    secret:
      type: PSK
      passphrase: &#39;asdf1234&#39;
  - selector: &#39;rsa-a.example.org&#39;
    secret:
      type: RSA
      private_key_file: &#39;/etc/ipsec.d/private/host-a.key&#39;
      prompt: true
  - selector: &#39;rsa-b.example.org&#39;
    secret:
    type: RSA
     private_key_file: &#39;/etc/ipsec.d/private/host-b.key&#39;
     passphrase: &#39;asdf1234&#39;
  - secret:
       type: RSA
       private_key_file: &#39;/etc/ipsec.d/private/host-def.key&#39;
  - secret:
       type: PIN
       slotnr: 1
       keyid: 50
       pin: 1234
  - secret:
       type: PIN
       slotnr: 1
       module: opensc
       keyid: 45
       prompt: true</code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>secret includes</p>
</div></p>
      
      <pre class="example code"><code>ipsec::secret_includes:
   - &#39;/var/lib/strongswan/ipsec.secrets.inc&#39;
   - &#39;/etc/ipsec.d/very.secret&#39;</code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>ca settings</p>
</div></p>
      
      <pre class="example code"><code>ipsec::conf::authorities:
  myca:
    auto: add
    cacert: /etc/ssl/certs/myca.pem
    crluri: file:///etc/ssl/crls/myca_crl.pem</code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>conn settings</p>
</div></p>
      
      <pre class="example code"><code>ipsec::conf::connections:
  test:
    type: transport
    left: %any
    leftcert: hostcert.pem
    right: 192.168.56.1
    rightid: %any
    auto: route</code></pre>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_include'>include</span> <span class='id identifier rubyid_ipsec'>ipsec</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ensure</span>
      
      
        <span class='type'>(<tt>Enum['present', 'absent']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>ensure meta-parameter to add or remove config done by this module</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>secrets</span>
      
      
        <span class='type'>(<tt>Array[Ipsec::Secret]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>array of secrets to be added to ipsec.secrets</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>secret_includes</span>
      
      
        <span class='type'>(<tt>Array[Stdlib::Absolutepath]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>array of paths to files to be included to ipsec.secrets</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>conf</span>
      
      
        <span class='type'>(<tt>Struct[{
    setup       =&gt; Optional[Hash[String,String]],
    authorities =&gt; Optional[Hash[String,Hash]],
    connections =&gt; Optional[Hash[String,Hash]],
  }]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Hash of ipsec.conf entries; for details see IpsecConf documentation</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="https://wiki.strongswan.org/projects/strongswan/wiki/IpsecConf" target="_parent" title="https://wiki.strongswan.org/projects/strongswan/wiki/IpsecConf">https://wiki.strongswan.org/projects/strongswan/wiki/IpsecConf</a></li>
    
  </ul>

</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/init.pp', line 87</span>

class ipsec (
  Enum[&#39;present&#39;, &#39;absent&#39;]   $ensure,
  Array[Ipsec::Secret]        $secrets,
  Array[Stdlib::Absolutepath] $secret_includes,
  Struct[{
    setup       =&gt; Optional[Hash[String,String]],
    authorities =&gt; Optional[Hash[String,Hash]],
    connections =&gt; Optional[Hash[String,Hash]],
  }]                          $conf,
) {
  contain ipsec::install
  contain ipsec::config
  contain ipsec::service

  Class[&#39;ipsec::install&#39;]
  -&gt; Class[&#39;ipsec::config&#39;]
  ~&gt; Class[&#39;ipsec::service&#39;]
}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>